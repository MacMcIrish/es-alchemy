language: node_js
services:
  - elasticsearch
before_script:
  - sleep 10
cache:
  directories:
    - ~/.npm
notifications:
  email: false
before_install:
  - npm install -g npm gally
  - ga promote $TRAVIS_BRANCH
  - curl -O https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/deb/elasticsearch/6.3.0/elasticsearch-6.3.0.deb && sudo dpkg -i --force-confnew elasticsearch-6.3.0.deb && sudo service elasticsearch restart
install:
  - npm install
node_js:
  - '10'
  - '8.10'
script:
  - npm test
after_success:
  - npm run coveralls
  - npm run semantic-release
